import test from 'ava';

import { createSome, createNone, isSome, isNone } from '../../__dist/cjs/PlainOption/Option';
import { createOk, createErr, isOk, isErr } from '../../__dist/cjs/PlainResult/Result';

const FUNC_TABLE = [
    [createSome, isOk],
    [createNone, isErr],
    [createOk, isSome],
    [createErr, isNone],
];

for (const [factory, typeguardFn] of FUNC_TABLE) {
    test(`The object generated by ${factory.name}() should be compatible with ${typeguardFn.name}()`, (t) => {
        const v = Symbol('');
        // @ts-expect-error ts-migrate(2349) FIXME: Each member of the union type '(<T>(val: T) => Som... Remove this comment to see the full error message
        const input = factory(v);
        // @ts-expect-error ts-migrate(2349) FIXME: Each member of the union type '(<T>(val: T) => Som... Remove this comment to see the full error message
        const actual = typeguardFn(input);
        t.is(actual, true);
    });
}
